<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/style.css">
    <title>Programmierung</title>
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.ico">
</head>
<body>
<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">

        <h1 id="project_title">Multi-MonG</h1>
        <h2 id="project_tagline">Multi-Monitoring Gadget der SPE Karlsruhe</h2>


    </header>
</div>

<div id="main_content_wrap" class="outer">
    <section id="main_content" class="inner">
        <iframe src="table_of_contents.html"
                onload="this.before((this.contentDocument.body||this.contentDocument).children[0]);this.remove()"></iframe>
        <h1>Programmierung</h1>
        <p>
            Für die Programmierung des Gadgets wird die "Arduino IDE" benötigt. Diese kann
            <a href="https://www.arduino.cc/en/software">hier</a> heruntergeladen werden und muss anschließend
            installiert werden. Nun muss noch die Unterstützung für den verwendeten Mikrocontroller eingerichtet werden.
            Dazu werden in der Arduino IDE die Einstellungen geöffnet (Datei>Voreinstellungen) und unter "Zusätzliche
            Boardverwalter-URLs" die folgende URL eingetragen:
            <br>
            <code>http://arduino.esp8266.com/stable/package_esp8266com_index.json</code>
            <br>
            Nun wird der Boardverwalter geöffnet (Werkzeuge>Board>Boardverwalter) und dort das Paket "esp8266"
            installiert.
        </p>
        <p>
            Für das Gadget gibt es zwei Programme, zwischen denen gewählt werden kann. Mit dem ersten Programm
            zeigt es die Uhrzeit, Temperatur, Luftfeuchtigkeit und Luftqualität an. Zusätzlich kann ein
            Timer gestellt und eine Laufschrift angezeigt werden. Das Programm kann hier heruntergeladen werden:
            <br>
            <a href="https://github.com/spe-khe/LED-Gadget/raw/master/MultiMonG.zip" class="dl_link">MultiMonG.zip</a>
        </p>
        <p>
            Das zweite Programm implementiert das klassische Computerspiel "Snake", das mit den zwei tastern gespielt
            wird. Das Programm kann hier heruntergeladen werden:
            <br>
            <a href="https://github.com/spe-khe/LED-Gadget/raw/master/Snake.zip" class="dl_link">Snake.zip</a>
        </p>
        <p>
            Nach dem Herunterladen muss die .zip-Datei entpackt werden. In dieser gibt es den Unterordner "libraries".
            Der Inhalt dieses Ordners muss unter Dokumente/Arduino/libraries eingefügt werden. Anschließend kann die
            Datei "MultiMonG.ino" bzw. "Snake.ino" aus der .zip-Datei in der Arduino IDE geöffnet werden.
        </p>
        <p>
            Das Gadget wird nun mit einem USB-Kabel an den Computer angeschlossen.
        </p>
        <p>
            Jetzt wird der verwendete Mikrocontroller ausgewählt (Werkzeuge>Board>ESP8266 Boards>NodeMCU 1.0), sowie der
            Port, an den der Mikrocontroller angeschlossen ist (Werkzeuge>Port). Wenn es hier mehrere
            Auswahlmöglichkeiten gibt, kann man das Gadget wieder vom Computer trennen und dabei beobachten, welcher
            Port verschwindet bzw. dazu kommt.
            <br>
            Jetzt kann das Programm durch einen Klick auf "Hochladen" (Der Pfeil oben links) auf das Gadget geladen
            werden.
        </p>

        <p>
            Während das Gadget programmiert wird, gucken wir uns kurz den Aufbau des Programms an:
        </p>
        <p>
            Hier soll es nur um den groben Aufbau der Programme gehen, zur genaueren Erläuterung dienen Kommentare, die
            direkt im Programm stehen:
        </p>
        <pre><code>/*
 *  So markierte Programmteile sind Kommentare, diese dienen nur der
 *  Erläuterung des Programms.
 */

// Auch so markierte Zeilen sind Kommentare</code></pre>

        <p>
            Am Anfang des Programms werden Bibliotheken importiert, das sind Dateien mit komplexerem Code, die für die
            einzelnen Bauteile zur Verfügung gestellt werden. So müssen wir nicht alle Funktionen selbst implementieren.
        </p>
        <pre><code>#include &ltMD_MAX72xx.h&gt	// LED-Matrix
#include &ltArduino.h&gt	// Standard Arduino-Bibliothek
...</code></pre>
        <p>
            Danach folgen einige Definitionen, hier werden bestimmte konstante Werte festgelegt, die dann im Programm
            benutzt werden. So sind alle Werte, die vielleicht später noch verändert werden könnten (z.B. die Pins des
            Mikrocontrollers, an die Sensoren etc. angeschlossen sind) an nur einer Stelle eingetragen.
        </p>
        <pre><code>#define BTN1_PIN D3
#define BTN2_PIN D2</code></pre>
        <p>
            Nun werden noch Variablen angelegt, die im Programm benutzt und verändert werden. Im MultiMonG-Programm
            können einige dieser Variablen nach Belieben verändert werden, z.B. Name und Passwort des ausgesendeten
            WLAN-Netzwerkes.
        </p>
        <pre><code>char SSID[50] = "Siemens-MultiMonG";
char PASSWORD[50] = "12345678";</code></pre>
        <p>
            Erst jetzt werden die Funktionen definiert, also der Teil des Programms, der das Verhalten des Gadgets
            direkt steuert. Dies sind im Wesentlichen zwei Funktionen:
        </p>
        <pre><code>void setup() {
    ...
    Diese Funktion wird beim Start des Gadgets einmal ausgeführt
    ...
}

void loop() {
    ...
    Diese Funktion wird danach immer wieder ausgeführt
    ...
}</code></pre>
        <div id="navigation">
            <a href="assembly.html">
                <div id="navigation_left" class="nav_prev"><< Aufbau</div>
            </a>
            <a href="manual.html">
                <div id="navigation_right" class="nav_next">Bedienung des MultiMonG >></div>
            </a>
        </div>
    </section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
    <footer class="inner">

        <p class="copyright">LED-Gadget maintained by <a href="https://github.com/spe-khe">spe-khe</a></p>

        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
    </footer>
</div>
</body>
</html>